# 使用 GPU 加速图像视频处理方法的演进
[會議影片連結](https://www.nvidia.com/gtc/session-catalog/?search=%E4%BD%BF%E7%94%A8%20GPU%20%E5%8A%A0%E9%80%9F%E5%9B%BE%E5%83%8F%E8%A7%86%E9%A2%91%E5%A4%84%E7%90%86%E6%96%B9%E6%B3%95%E7%9A%84%E6%BC%94%E8%BF%9B&tab.catalogallsessionstab=16566177511100015Kus#/session/1726165114631001Ol8o)
# 使用 GPU 加速圖像影片處理方法的演進

## Key Takeaways
本次會議主要介紹了火山引擎視頻雲如何使用 NVIDIA GPU 加速圖像和視頻處理，涵蓋了 CUDA 加速傳統算法、TensorRT 加速 CNN 模型、GPU 利用率最大化、調度器執行模式以及視覺大模型優化等方面。
### 重點摘要：
*   使用 CUDA 加速傳統圖像處理算法，性能提升顯著。
*   使用 TensorRT 加速 CNN 模型，並通過模型拆分和算子融合等方式優化顯存佔用和性能。
*   通過異步調度提高 GPU 利用率，解決 CPU 前後處理導致的 GPU 閒置問題。
*   採用 GPU 執行器調動模式，解決算法模板數量過多導致的顯存開銷和維護困難問題。
*   針對 LAVA 等視覺大模型進行優化，提升推理速度。
### Topic: GPU 加速、圖像處理、視頻處理、深度學習、TensorRT、CUDA、異步調度、模型優化

## 會議主題
會議主要圍繞如何利用 GPU 加速圖像和視頻處理，提升性能、降低成本、優化資源利用率展開討論，涵蓋了傳統算法、深度學習模型以及視覺大模型等多個方面。

## 主要技術點
*   **CUDA 加速傳統算法：** 使用 CUDA 加速色彩空間轉換、圖像縮放、邊緣檢測、HDR 等傳統圖像處理算法，性能提升顯著，並應用於實時轉碼、點播視頻增強、直播視頻處理、圖片處理等場景。
*   **TensorRT 加速 CNN 模型：** 使用 TensorRT 對基於 CNN 的神經網絡模型進行推理優化，通過 Onnx 和 Torch2TRT 兩種方式進行模型轉換，並針對不同場景和質量的視頻圖像研發了上百個增強類模型。
*   **模型拆分和算子融合：** 針對超分辨率模型 EDVR，通過模型拆分和共享工作區顯存的方式降低顯存開銷，並使用 CUDA 重寫融合算子，進一步提升性能和降低顯存佔用。
*   **異步調度：** 通過將算法過程部署在不同的線程上，使用對列進行任務管理，實現 CPU 的異步調度，提高 GPU 利用率。
*   **GPU 執行器調動模式：** 通過共享工作區空間、分塊處理等方式降低顯存開銷，並將所有模型集合在一個服務中，根據不同的配置同時支持所有業務，簡化維護。
*   **視覺大模型優化：** 針對 LAVA 等視覺大模型，使用 TensorRT 和 TensorRT LLM 進行加速，並使用 C++ 重新優化流程，減少 GPU 的空閒時間。
*   **硬件編解碼：** 使用 GPU 的硬件編解碼能力對視頻進行解碼和編碼，加速視頻轉碼過程。

## 決策與共識
*   使用 CUDA 加速傳統算法，提高圖像處理速度。
*   使用 TensorRT 加速 CNN 模型，並通過模型優化降低顯存佔用。
*   採用異步調度提高 GPU 利用率，解決 CPU 前後處理導致的 GPU 閒置問題。
*   採用 GPU 執行器調動模式，解決算法模板數量過多導致的顯存開銷和維護困難問題。
*   針對視覺大模型進行優化，提升推理速度。

## 時間規劃與里程碑
*   持續優化 CUDA 加速的傳統算法，並擴展應用場景。
*   持續優化 TensorRT 加速的 CNN 模型，並探索更多模型優化方法。
*   持續優化異步調度策略，提高 GPU 利用率。
*   持續優化 GPU 執行器調動模式，支持更多業務需求。
*   持續優化視覺大模型，提升推理速度和精度。

## 未解決的技術挑戰
*   CPU 瓶頸：CPU 處理速度跟不上 GPU，導致 GPU 利用率下降。
*   任務分發不飽和：任務分發不飽和，導致部分 GPU 處於閒置狀態。
*   更上層應用的深度優化：更上層應用存在一些瓶頸，暫時無法進行深度優化。

## 後續行動計劃
*   持續優化 CUDA 和 TensorRT，提升算法性能。
*   繼續探索模型優化方法，降低顯存佔用。
*   優化任務分發策略，提高 GPU 利用率。
*   與更上層應用合作，解決 CPU 瓶頸問題。
*   繼續研究視覺大模型優化方法，提升推理速度和精度。
