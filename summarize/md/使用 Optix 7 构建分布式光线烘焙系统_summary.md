# 使用 Optix 7 构建分布式光线烘焙系统
[會議影片連結](https://www.nvidia.com/gtc/session-catalog/?search=%E4%BD%BF%E7%94%A8%20Optix%207%20%E6%9E%84%E5%BB%BA%E5%88%86%E5%B8%83%E5%BC%8F%E5%85%89%E7%BA%BF%E7%83%98%E7%84%99%E7%B3%BB%E7%BB%9F&tab.catalogallsessionstab=16566177511100015Kus#/session/1727639863789001gc1u)
# 使用 Optix 7 構建分散式光線烘焙系統

## Key Takeaways
本次分享介紹了如何利用 NVIDIA 的 OptiX 7 開發一款分散式光照烘焙系統 MagicDone，以助力遊戲專案獲得高品質、高效能的全域光照效果。
### 重點摘要：
*   MagicDone 是一款基於 NVIDIA OptiX 7 光線追蹤引擎的分散式光照烘焙系統。
*   該系統旨在解決遊戲開發中光照烘焙耗時、傳統烘焙工具存在局限性等痛點。
*   MagicDone 支援多種烘焙場景，包括光照貼圖、體積光照方案（如 VLM、ILC 和 CLV）以及 PRT 數據輸出。
*   實測數據顯示，MagicDone 單卡效率提升約 6 倍，整體效率提升將近 40 倍。
### Topic: 光線追蹤、全域光照、分散式烘焙、遊戲開發

## 會議主題
會議主要探討了使用 NVIDIA OptiX 7 光線追蹤引擎構建分散式光照烘焙系統 MagicDone 的技術細節和優勢，旨在提升遊戲開發中光照烘焙的效率和品質。

## 主要技術點
*   **OptiX 7 的自由資源管理：** OptiX 7 允許使用者直接使用 CUDA API 管理資源，提供了更大的靈活性和控制力，方便後續烘焙 PaaS 的開發。
*   **RDG 資源管理系統：** 實現了一套資源管理圖，可以根據資源之間的依賴關係自動管理資源的生命週期，優化資源利用率。
*   **大世界場景拆分與規劃：** 針對大型遊戲場景，MagicDone 能夠自適應地根據區域內的物體數量拆分場景，避免單卡顯存溢出的問題，並最小化管線的再次創建。
*   **均勻任務組裝：** 組合過小的任務，拆分過大的任務，使得所有任務都有一致的大小，保證了增加節點就能縮短總烘焙時間。
*   **OptiX AI 降噪器：** 使用 OptiX 的 AI 降噪器進行降噪，相比傳統的雙邊濾波，更不容易發生漏光現象，並能處理方向性資訊。
*   **PRT 2.0：** 通過拆分高頻資訊到 LightMap 上，低頻資訊到 Prob 上，大大縮小了所需的儲存開銷，實現動態的晝夜變化。
*   **AI 壓縮和離線防漏光光照體積優化：** 使用 AI 壓縮技術，可以做到遠低於傳統壓縮演算法的壓縮率，並還原更多細節資訊。離線優化 Volume 分割的方式可以減少薄牆附近的漏光問題。

## 決策與共識
*   選擇烘焙 GI 的路線，以提供高品質、低開銷的 GI 解決方案。
*   利用 NVIDIA OptiX 7 來克服傳統光照烘焙過程中的不足。
*   採用分散式架構，提升烘焙效率。
*   使用 AI 技術進行降噪和壓縮，優化烘焙效果和包體大小。

## 時間規劃與里程碑
*   MagicDone 已經成為 Unity 中國的官方雲烘焙提供者。
*   持續優化 MagicDone 的效能和功能，並將其應用於更多遊戲專案中。

## 未解決的技術挑戰
*   如何進一步提升大世界場景的烘焙效率。
*   如何更好地解決體積光照的漏光問題。
*   如何進一步降低遊戲包體的大小。

## 後續行動計劃
*   繼續優化 MagicDone 的各項功能，提升烘焙效率和品質。
*   探索更多 AI 技術在光照烘焙中的應用，例如 AI 超解析度、AI 紋理生成等。
*   與更多遊戲開發團隊合作，將 MagicDone 應用於更多遊戲專案中。
*   持續關注硬體技術的發展，並將其應用於 MagicDone 中，例如利用新的 GPU 架構和光線追蹤技術。
